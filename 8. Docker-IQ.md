# Advanced Docker Interview Questions 
---

## 41. How do you update secrets/configs without restarting containers?

### Explanation
Docker alone cannot update secrets/configs dynamically without restarting a container.  
However, some orchestrators and external tools provide solutions.

### Methods
- Docker Swarm configs (in-memory files)
- Kubernetes Secrets/ConfigMaps with auto-reload mechanisms
- External secret managers:
  - AWS Secrets Manager
  - HashiCorp Vault
  - Azure Key Vault

### Real-World Example
We integrated Vault Agent Injector to refresh secrets automatically on file change without restarting application containers.

---

## 42. How do you prevent container escape vulnerabilities?

### Security Practices
- Run containers as non-root users
- Use seccomp, AppArmor, SELinux
- Never use privileged containers
- Enable user namespace remapping
- Use read-only filesystems
- Avoid host mounts unless absolutely required

### Real-World Example
A security audit led us to enforce a strict seccomp profile across all production containers to block dangerous syscalls.

---

## 43. How do you avoid race conditions during container startup?

### Explanation
Race conditions occur when a service starts before its dependencies are ready.

### Solutions
- Use init containers (in Kubernetes)
- Add health checks for dependency readiness
- Add entrypoint wait scripts:
  ```bash
  until nc -z db 3306; do echo "Waiting for DB..."; sleep 2; done
````

### Real-World Example

Our Django app used a wait script to ensure PostgreSQL was ready, preventing random startup failures.

---

## 44. What are zombie containers and how do you clean them up?

### Explanation

Zombie containers are:

* Stopped unexpectedly
* Stuck in exited state
* Consuming disk space

### Cleanup

```bash
docker ps -a
docker rm $(docker ps -aq)
docker system prune
```

### Real-World Example

Staging servers accumulated dozens of exited containers; nightly cleanup using `docker container prune` fixed the issue.

---

## 45. How do you run Docker containers on Kubernetes vs standalone Docker?

### Differences

* Kubernetes uses CRI (containerd, CRI-O), not Docker
* Deployments use YAML files instead of `docker run`
* Kubernetes handles scaling, networking, self-healing

### Standalone Example

```bash
docker run -d -p 80:80 nginx
```

### Kubernetes Example

```yaml
apiVersion: apps/v1
kind: Deployment
spec:
  replicas: 3
  template:
    spec:
      containers:
        - name: nginx
          image: nginx
```

### Real-World Example

We migrated from Docker Compose setups to Kubernetes for automated rollouts and scaling.

---

## 46. How do you simulate network failures in containers for testing?

### Tools

* Pumba (Docker chaos testing)
* Chaos Mesh
* Linux tc/netem

### Example

```bash
pumba netem --interface eth0 delay --time 3000 container_name
```

### Real-World Example

We used Pumba to simulate latency and packet loss to test backend retry mechanisms.

---

## 47. What are the common issues with Docker and IPv6?

### Issues

* IPv6 disabled by default
* Limited IPv6 NAT support
* Some base images lack IPv6 tools
* Manual routing/configuration needed

### Real-World Example

A service failed IPv6 compliance because Docker host lacked IPv6 NAT rules → required daemon.json update.

---

## 48. How do you enable IPv6 support for Docker containers?

### Steps

1. Update `/etc/docker/daemon.json`:

   ```json
   {
     "ipv6": true,
     "fixed-cidr-v6": "2001:db8:1::/64"
   }
   ```

2. Restart Docker:

   ```bash
   systemctl restart docker
   ```

### Real-World Example

We enabled IPv6 in production to meet dual-stack compliance for a telecom client.

---

## 49. How do you configure custom DNS for Docker containers?

### Per Container

```bash
docker run --dns=8.8.8.8 --dns=1.1.1.1 nginx
```

### Global Setting

`/etc/docker/daemon.json`:

```json
{
  "dns": ["8.8.8.8", "1.1.1.1"]
}
```

### Real-World Example

We configured internal DNS servers globally so containers could resolve internal microservice domains.

---

## 50. How do you restrict container access to certain domains or IPs?

### Methods

* iptables or nftables
* Docker network isolation
* Host firewalls (UFW)
* Service mesh (Istio, Linkerd)
* Cilium/Calico network policies

### Example

```bash
iptables -A OUTPUT -p tcp -d blocked.com -j DROP
```

### Real-World Example

We blocked production containers from accessing public IPs for compliance requirements.

---

## 51. How do you automate container health and readiness checks?

### Methods

* Dockerfile `HEALTHCHECK`
* Docker Compose healthcheck
* Kubernetes liveness/readiness probes

### Example

```dockerfile
HEALTHCHECK CMD curl -f http://localhost:8080/health || exit 1
```

### Real-World Example

In Docker Compose, unhealthy containers were automatically restarted when the healthcheck failed.

---

## 52. How do you roll back a faulty image deployed to production?

### Methods

* Redeploy previous version:

  ```bash
  docker run myapp:1.3
  ```
* Maintain versioned tags
* Kubernetes:

  ```bash
  kubectl rollout undo deployment/myapp
  ```

### Real-World Example

We rolled back a bad deployment within seconds using the previous versioned tag stored in AWS ECR.

---

## 53. What is Docker’s image signing mechanism?

### Explanation

Docker uses **Docker Content Trust (DCT)** based on Notary/TUF to sign and verify image integrity.

### Enable DCT

```bash
export DOCKER_CONTENT_TRUST=1
```

### Real-World Example

Our organization required all images to be signed before deployment for compliance auditing.

---

## 54. How do you restrict container image sources to trusted registries?

### Methods

* Configure allowed registries in Docker daemon
* Enforce image signing
* Firewall blocking external registries
* Private registry only policy

### Real-World Example

Only Harbor registry was allowed on production nodes; Docker Hub was blocked to prevent unauthorized images.

---

## 55. What are container runtime interfaces (CRI)? How does Docker interact with them?

### Explanation

CRI defines how Kubernetes interacts with container runtimes.

### Supported Runtimes

* containerd
* CRI-O
* runc
* gVisor

Docker is no longer the runtime for Kubernetes; instead:

* Docker → containerd → runc

### Real-World Example

We migrated to containerd when Kubernetes deprecated Docker as a runtime.

---

## 56. How does Docker manage shared layers across images?

### Explanation

Docker stores image layers in a shared layer store.
If two images reuse the same base layers, Docker stores them only once.

### Real-World Example

Multiple microservices using `python:3.11` shared common layers, reducing disk usage significantly.

---

## 57. What’s the purpose of the squash option while building images?

### Explanation

`squash` merges all layers into one layer.

### Benefits

* Reduces size
* Hides intermediate layers
* Improves security

### Example

```bash
docker build --squash -t myapp .
```

### Real-World Example

We used squash to remove temporary build artifacts and secret files present in intermediate layers.

---

## 58. What are tmpfs mounts and their benefits in Docker?

### Explanation

`tmpfs` mounts store files in RAM instead of disk.

### Benefits

* Extremely fast
* Data erased at shutdown
* Good for sensitive/temp data

### Example

```bash
docker run --tmpfs /tmp myapp
```

### Real-World Example

We stored session cache in tmpfs to avoid slow disk writes and to automatically clear data on restart.

---

## 59. How can you isolate containers using AppArmor/SELinux profiles?

### Explanation

AppArmor and SELinux enforce mandatory access controls to restrict container capabilities.

### AppArmor Example

```bash
docker run --security-opt apparmor=profile_name myapp
```

### SELinux Example

```bash
docker run --security-opt label:type:container_t myapp
```

### Real-World Example

We ran containers in SELinux “enforcing mode” to restrict unauthorized host filesystem access.

---

## 60. How do you perform fine-grained container access controls?

### Methods

* Linux capabilities (`--cap-drop`, `--cap-add`)
* seccomp profiles
* AppArmor/SELinux
* Network policies
* Cloud IAM roles

### Example

```bash
docker run --cap-drop=ALL --cap-add=NET_BIND_SERVICE myapp
```

### Real-World Example

We stripped all default capabilities from production containers, drastically reducing attack surface.

---

```

