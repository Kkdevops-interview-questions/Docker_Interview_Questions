# Advanced Docker Interview Questions 
---

## 81. What’s the impact of Docker garbage collection?

### Explanation
Docker garbage collection removes unused:
- Images  
- Containers  
- Volumes  
- Networks  

### Impact
Positive:
- Frees disk space  
- Improves node performance  

Negative:
- If misconfigured, can remove needed layers  
- May break running builds or CI pipelines  

### Real-World Example
A build server had 200+ GB of dangling layers. After GC, build times improved due to recovered disk I/O speed.

---

## 82. How do you set up a local Docker registry with authentication?

### Steps
1. Run registry container:
   ```bash
   docker run -d -p 5000:5000 --name registry registry:2
   ```
2. Create htpasswd file:

   ```bash
   htpasswd -Bbn user password > auth/htpasswd
   ```
3. Run registry with auth:

   ```bash
   docker run -d -p 5000:5000 \
     -v $(pwd)/auth:/auth \
     -e "REGISTRY_AUTH=htpasswd" \
     -e "REGISTRY_AUTH_HTPASSWD_REALM=Registry Realm" \
     -e "REGISTRY_AUTH_HTPASSWD_PATH=/auth/htpasswd" \
     registry:2
   ```

### Real-World Example

We used a private authenticated registry for offline builds in secure environments.

---

## 83. How do you mirror Docker Hub images for offline access?

### Methods

* Use Docker Registry Mirror
* Use Harbor as a caching proxy
* Pull → save → load offline:

  ```bash
  docker pull nginx
  docker save -o nginx.tar nginx
  ```

### Real-World Example

Air-gapped environments mirrored essential images using Harbor proxy cache.

---

## 84. What’s the role of overlay networks in Docker Swarm?

### Explanation

Overlay networks enable multi-host networking.
They allow Swarm containers across different hosts to communicate securely.

### Real-World Example

A 5-node Swarm cluster used overlay networks to allow backend and API containers across hosts to communicate transparently.

---

## 85. How do you perform zero-downtime deployments using Docker?

### Methods

* Rolling updates (Swarm/Kubernetes)
* Blue–Green deployments
* Load balancers with drain and shift traffic
* Running multiple container versions until new one is ready

### Real-World Example

We deployed backend updates with Swarm rolling updates, keeping services online with no downtime.

---

## 86. What is blue–green deployment using Docker?

### Explanation

Two environments:

* Blue = current production
* Green = new version

Switch traffic to green when ready.

### Real-World Example

We ran green containers behind the load balancer and switched traffic after healthchecks passed, enabling instant rollback.

---

## 87. How do you load test containers under real-world conditions?

### Tools

* JMeter
* Locust
* k6
* Vegeta

### Real-World Example

A Node.js container was tested with 10k concurrent requests using k6 to identify memory bottlenecks.

---

## 88. What’s the difference between Docker pause and stop?

### pause

Freezes container processes using cgroups freezer.

### stop

Gracefully terminates process using SIGTERM → SIGKILL.

### Real-World Example

We paused a long-running analytics job instead of stopping it when we needed temporary resource relief.

---

## 89. What are health checks and how do they help in orchestration?

### Explanation

Health checks ensure containers are functioning properly.
Orchestrators restart unhealthy containers.

### Example

```dockerfile
HEALTHCHECK CMD curl -f http://localhost:8080/health || exit 1
```

### Real-World Example

A Java container that hung under load was automatically restarted after failing healthchecks.

---

## 90. How do you design a CI/CD pipeline with Docker at the core?

### Stages

* Build image
* Run tests in containers
* Scan image
* Push to registry
* Deploy using container orchestrator
* Rollback mechanism

### Real-World Example

Our Jenkins pipeline created immutable Docker images and deployed them via Helm charts.

---

## 91. How do you promote Docker images across environments (dev → prod)?

### Methods

* Tagging strategy:

  ```
  myapp:dev → myapp:staging → myapp:prod
  ```
* Image signing for validation
* CI/CD promotion gates

### Real-World Example

Images were moved from dev ECR repo to prod ECR after automated security checks.

---

## 92. What is the benefit of using .dockerignore in builds?

### Benefits

* Faster build times
* Smaller images
* Prevent leaking secrets
* Avoid copying unnecessary files

### Real-World Example

Excluding node_modules and logs reduced image context by 500MB.

---

## 93. How do you run Docker-in-Docker (dind)? What are the risks?

### Run

```bash
docker run --privileged docker:dind
```

### Risks

* Full host root access
* Breaks isolation
* Easily exploited if compromised

### Real-World Example

We replaced dind with BuildKit and remote Docker socket to avoid security risks.

---

## 94. How do you isolate container workloads on shared infrastructure?

### Methods

* User namespace remapping
* Dedicated networks
* AppArmor/SELinux
* Resource quotas
* CPU/memory pinning
* Node taints/tolerations (in Kubernetes)

### Real-World Example

High-security workloads ran in separate namespaces with SELinux enforcing mode.

---

## 95. How do you containerize an app that uses system-level dependencies?

### Methods

* Use official base images with required libraries
* Install OS packages during build
* Use multi-stage builds to compile system-level components
* Mount device files if needed

### Example

```dockerfile
RUN apt-get update && apt-get install -y libpq-dev
```

### Real-World Example

A video-processing service needed ffmpeg; we compiled it in a multi-stage build.

---

## 96. What are the limitations of Docker for production-scale apps?

### Key Limitations

* Not ideal for stateful workloads alone
* Requires orchestrators for scaling
* Networking complexity
* Security configuration overhead
* Limited built-in secret management

### Real-World Example

We moved from standalone Docker to Kubernetes for auto-scaling and resilience.

---

## 97. How does Docker interact with kernel-level features?

### Kernel Features Used

* Namespaces
* Cgroups
* Seccomp
* OverlayFS
* Capabilities

### Real-World Example

We analyzed container resource behavior using cgroup files in `/sys/fs/cgroup`.

---

## 98. How can you optimize image rebuilds in large monorepos?

### Techniques

* Multi-stage builds
* Dependency caching
* BuildKit cache mounts
* Split monorepo into smaller contexts
* Use build matrix in CI

### Real-World Example

Switching to BuildKit with cache mounts halved our monorepo build times.

---

## 99. What’s the difference between daemonless and traditional Docker runtimes?

### Traditional Docker

Requires dockerd daemon.

### Daemonless Runtimes

* Podman
* Buildah
* Rootless mode

### Benefits

* No central daemon
* More secure
* Better multi-user support

### Real-World Example

We used Podman for unprivileged container operations on dev servers.

---

## 100. What tools complement Docker for production-grade deployments?

### Tools

* Kubernetes
* Helm
* Prometheus & Grafana
* ELK/EFK stack
* Vault
* BuildKit
* Flux/ArgoCD
* Service Mesh (Istio, Linkerd)

### Real-World Example

A production microservices platform used Docker + Kubernetes + ArgoCD + Istio for complete CI/CD and service management.

